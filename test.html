<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@2.0.0/dist/tf.min.js"></script>
<script>
  
 async function dengar(){
    const mic = await tf.data.microphone({
   fftSize: 1024,
   columnTruncateLength: 259,
   numFramesPerSpectrogram: 0,
   sampleRateHz:48000,
   includeSpectrogram: true,
   includeWaveform: true
});
const audioData = await mic.capture();


setTimeout(async function(){
    const spectrogramTensor = audioData.spectrogram;
spectrogramTensor.print();
// console.log(spectrogramTensor);
const waveformTensor = audioData.waveform;
// waveformTensor.print();
mic.stop();

let model = await tf.loadLayersModel("http://149.129.240.254/voice_recog/model.json")
let z = model.predict(spectrogramTensor)
// console.log(z);
z.print()
let index = z.argMax(1).dataSync()[0]
// console.log(index);
}, 5000);
  }

dengar()


</script>